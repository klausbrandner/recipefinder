{"version":3,"sources":["models/recipe-service.ts"],"names":[],"mappings":"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","file":"recipe-service.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Http, Response } from '@angular/http';\r\nimport { Observable }     from 'rxjs/Observable';\r\n\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/catch';\r\n\r\nimport { Recipe } from \"./recipe\";\r\nimport { Ingredient } from \"./ingredient\";\r\nimport addRange = ts.addRange;\r\n\r\n@Injectable()\r\nexport class RecipeService {\r\n\r\n    private recipes: Recipe[];\r\n    private categories: string[];\r\n    private service = 'http://localhost:3306';\r\n\r\n    constructor (private http: Http) {\r\n        //this.init();\r\n        this.recipes = [];\r\n        this.categories = [];\r\n        \r\n    }\r\n\r\n    getRecipes(): Observable<Recipe[]> {\r\n        this.recipes = [];\r\n        return this.http.get(this.service + '/recipes').map((res) => {\r\n            let body = res.json();\r\n            console.log(body);\r\n            for(let recipe of body){\r\n                var ingredients = [];\r\n                for(let ingredient of recipe.ingredients){\r\n                    ingredients.push(new Ingredient(ingredient.title, ingredient.quantity));\r\n                }\r\n                this.addRecipe(recipe.rid,\r\n                    recipe.title,\r\n                    recipe.description,\r\n                    recipe.preparation,\r\n                    recipe.rating,\r\n                    ingredients,\r\n                    recipe.categories\r\n                );\r\n            }\r\n            return this.recipes;\r\n        });\r\n    }\r\n\r\n    addRecipe(rid:number, title:string, description:string, preparation:string, rating:number, ingredients:Ingredient[],categories:string[]) {\r\n        this.recipes.push(new Recipe(this.http,rid,title,description,preparation,ingredients,rating,categories));\r\n        for(let category of categories){\r\n            if(this.categories.indexOf(category) == -1){\r\n                this.categories.push(category);\r\n            }\r\n        }\r\n    }\r\n\r\n    createRecipe(title:string,description:string,preparation:string,ingredients:Ingredient[],categories:string[]) {\r\n\r\n        var data = {\r\n            title:title,\r\n            description:description,\r\n            preparation:preparation,\r\n            ingredients:ingredients,\r\n            categories:categories,\r\n        };\r\n\r\n        this.http.post(this.service + '/recipes',data).map((res) => {\r\n\r\n            let body = res.json();\r\n            this.addRecipe(body.insertId,title,description,preparation,0,ingredients,categories);\r\n\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        getRecipe(rid:number): Promise<Recipe>{\r\n        for(let recipe of this.recipes){\r\n            if(recipe.rid == rid){\r\n                return Promise.resolve(recipe);\r\n            }\r\n        }\r\n        return Promise.resolve({});\r\n    }\r\n    \r\n    rateRecipe(recipe:Recipe, rating:number, cb): void {\r\n        cb(\"done\");\r\n    }\r\n\r\n\r\n    getCategories(): Promise<string[]> {\r\n        return Promise.resolve(this.categories);\r\n    }\r\n\r\n}\r\n"]}